# ملف إصلاح النصوص العربية التالفة
# يستبدل علامات الاستفهام بالنصوص العربية الصحيحة

$replacements = @{
    "??????" = "غير محدد"
    "?? ????" = "غير محدد"
    "??? ????" = "غير محدد"
    "????? ?????? ???????" = "الجلسة القادمة والمهام"
    "???????" = "الدروس"
    "????? ??????" = "البيانات الشخصية"
    "???? ???? ??????" = "لوحة تحكم الطالب"
    "???? ????? ????????? ?????? ??????" = "تابع تقدمك الأكاديمي وحقق أهدافك"
    "????, ???? ????, ?????, ????, ?????, ????" = "طالب, لوحة تحكم, دروس, تعلم, قرآن, تعليم"
    "???? ??????" = "صورة الطالب"
    "??????? ??????? ?????" = "مواعيد الحلقة الخاصة"
    "???? ??? ?????" = "لا يوجد اسم حلقة"
    "???? ??????" = "رابط الحصة"
    "?? ???? ???? ??? ???? ????? ??????? ?? ???????" = "لا يوجد رابط حصة أو تحتاج لتفعيل الحساب أو الانضمام"
    "?? ?????? ?? ???? ????? ?????? ??????" = "لا توجد لك حصص متاحة حالياً"
    "???? ??????? ?? ??????? ?????? ???????" = "تواصل مع الإدارة أو قم بالتسجيل بالدورات"
    "??? ?? ????? ????? ????????" = "خطأ في إضافة الدرس للحلقة"
    "??? ?? ????? ?????" = "خطأ في تحديث الدرس"
    "??? ?? ??? ?????" = "خطأ في حذف الدرس"
    "??? ?? ??? ?????? ?????" = "خطأ في جلب بيانات الدرس"
    "??? ?? ????? ?????" = "خطأ في إتمام الدرس"
    "??? ?? ??? ?????? ??????" = "خطأ في جلب قائمة الطلاب"
    "??? ?? ????? ??????" = "خطأ في إنشاء الطالب"
    "??? ?? ????? ?????? ??????" = "خطأ في تحديث بيانات الطالب"
    "??? ?? ????? ?????? ?????" = "خطأ في تحديث بيانات العضو"
    "??? ?? ????? ???? ??????" = "خطأ في إضافة حصص للطالب"
    "??? ?? ??? ?????" = "خطأ في حذف العضو"
    "??? ?? ??? ?????? ????????" = "خطأ في جلب قائمة المعلمين"
    "??? ?? ????? ??????" = "خطأ في إنشاء المعلم"
    "??? ?? ????? ?????? ??????" = "خطأ في تحديث بيانات المعلم"
    "??? ?? ????? ???? ?????? ??????" = "خطأ في تحديث رابط اجتماع المعلم"
    "??? ?? ??? ??????" = "خطأ في حذف المعلم"
    "??? ?? ??? ?????? ?????????" = "خطأ في جلب قائمة الحلقات"
    "??? ?? ????? ????????" = "خطأ في إنشاء الحلقة"
    "??? ?? ??? ????????" = "خطأ في حذف الحلقة"
    "??? ?? ????? ??? ????????" = "خطأ في إضافة عضو للحلقة"
    "??? ?? ????? ??? ?? ????????" = "خطأ في إزالة عضو من الحلقة"
    "??? ?? ??? ?????? ??????" = "خطأ في جلب قائمة التقارير"
    "??? ?? ??? ???????" = "خطأ في جلب التقارير"
    "??? ?? ????? ????? ?????" = "خطأ في تحديث حالة التقرير"
    "??? ?? ??? ?????? ???????" = "خطأ في جلب قائمة الدورات"
    "??? ?? ??? ?????? ??????" = "خطأ في جلب قائمة الدورات"
    "?????" = "إلغاء"
    "????? ?????" = "تمت بنجاح"
    "???? ?????? ??????" = "حفظ بيانات الطالب"
    "????? ??? ??????" = "تقرير عن الحلقة"
    "???? ????? ?????? ?????..." = "يتم تحميل بيانات الطلبة..."
    "????? ????????" = "تفاصيل الحلقة"
    "??????:" = "الحلقة:"
    "?????? ({0}/{1})" = "الطلاب ({0}/{1})"
    "???? ???????" = "تمت المراجعة"
    "?? ????? {0} ?? {1} ????" = "تم تحديد {0} من {1} طالب"
    "????? ???????? ???????? ???????" = "تحديث البيانات الموجودة مسبقاً"
    "??? ?????" = "جدول الحصص"
    "????? ????? ??????" = "تعديل البيانات الشخصية"
    "???? ???? ??????" = "لوحة تحكم المعلم"
    "???? ???? ?????? ?????? ??????? ???????" = "لوحة تحكم المعلم لإدارة الحصص والطلاب"
    "????, ???? ????, ???, ????, ?????, ?????" = "معلم, لوحة تحكم, حصص, طلاب, تعليم, أكاديمية"
    "????? ?????? {0}" = "أهلاً وسهلاً {0}"
}

Write-Host "بدء عملية إصلاح النصوص العربية التالفة..."

# الحصول على جميع ملفات TypeScript/JavaScript/React
$files = Get-ChildItem -Path "src" -Recurse -Include "*.tsx", "*.ts", "*.jsx", "*.js"

foreach ($file in $files) {
    Write-Host "معالجة الملف: $($file.FullName)"
    
    $content = Get-Content $file.FullName -Raw -Encoding UTF8
    $originalContent = $content
    
    # تطبيق كل الاستبدالات
    foreach ($pattern in $replacements.Keys) {
        $replacement = $replacements[$pattern]
        $content = $content -replace [regex]::Escape($pattern), $replacement
    }
    
    # حفظ الملف إذا تم التغيير
    if ($content -ne $originalContent) {
        $content | Set-Content $file.FullName -Encoding UTF8
        Write-Host "تم إصلاح الملف: $($file.FullName)" -ForegroundColor Green
    }
}

Write-Host "تم إكمال عملية الإصلاح بنجاح!" -ForegroundColor Yellow
